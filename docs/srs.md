# 📄 Software Requirements Specification (SRS)  
## 🧭 Prayer Times Calculation SDK — Minimalist & Offline  
**الإصدار: 1.0**  
**تاريخ: 2025-04-05**  
**المؤلف: [اسمك أو فريقك]**  
**المستهدف: المطورون الداخليون / فريق التطوير**

---

## 1. مقدمة (Introduction)

### 1.1 الغرض (Purpose)
تهدف هذه الوثيقة إلى تحديد المتطلبات الوظيفية وغير الوظيفية لـ **SDK محلي لحساب مواقيت الصلاة**، يعمل دون اتصال بالإنترنت، ولا يعتمد على أي حزم أو خدمات خارجية، ويُستخدم فقط لحساب أوقات الصلوات الخمس + الشروق.

### 1.2 نطاق المشروع (Scope)
- SDK مدمج داخل التطبيق (Embedded Library).
- لا يتصل بالإنترنت.
- لا يحتوي على أي ميزات إضافية (لا هجري، لا قبلة، لا إشعارات...).
- يدعم تخصيص طرق الحساب (زوايا الفجر/العشاء، مذهب العصر).
- يُرجع أوقات الصلاة كنصوص بصيغة `HH:mm`.

### 1.3 التعريفات والمصطلحات (Definitions, Acronyms, Abbreviations)

| المصطلح | المعنى |
|---------|--------|
| SDK | Software Development Kit — مكتبة برمجية للتضمين في التطبيقات |
| Fajr | وقت صلاة الفجر |
| Sunrise | وقت شروق الشمس |
| Dhuhr | وقت صلاة الظهر |
| Asr | وقت صلاة العصر |
| Maghrib | وقت صلاة المغرب |
| Isha | وقت صلاة العشاء |
| MWL | طريقة رابطة العالم الإسلامي (Fajr 18°, Isha 17°) |
| ISNA | طريقة الجمعية الإسلامية لأمريكا الشمالية |
| Hanafi | مذهب فقهي — العصر يُحسب بظل ضعف الجسم |
| Standard | مذهب شافعي/مالكي/حنبلي — العصر بظل مساوٍ للجسم |

---

## 2. الوصف العام (Overall Description)

### 2.1 وجهة نظر المنتج (Product Perspective)
SDK مستقل، يُستخدم كمكتبة داخلية في أي تطبيق (ويب، جوال، سطح مكتب)، لا يتصل بخدمات خارجية، ولا يعتمد على أي مكتبات طرف ثالث.

### 2.2 وظائف المنتج (Product Functions)
- حساب أوقات الصلاة بناءً على:
  - الإحداثيات الجغرافية (lat, lng)
  - التاريخ
  - التوقيت المحلي (timezone)
  - طريقة الحساب (method أو زوايا مخصصة)
- إرجاع الأوقات كـ `string` بصيغة `HH:mm`.

### 2.3 خصائص المستخدمين (User Characteristics)
- مطورون برمجيون.
- لديهم خبرة في تضمين المكتبات واستخدام الواجهات البرمجية.
- لا يحتاجون واجهات رسومية أو إعدادات معقدة.

### 2.4 القيود (Constraints)
- لا استخدام للإنترنت.
- لا تخزين للبيانات.
- لا تبعيات خارجية.
- لا دعم للغات أو التقويم الهجري.
- لا دعم للإشعارات أو الأصوات.

### 2.5 الافتراضات والاعتمادات (Assumptions and Dependencies)
- التطبيق المستخدم للـ SDK سيوفر:
  - `latitude`, `longitude`
  - `timezone` (عدد عشري مثل 3 أو -5)
  - `Date` (اختياري — يُستخدم التاريخ الحالي إذا لم يُحدد)
- لا يعتمد SDK على أي مكتبات خارجية.
- يُستخدم `Date` القياسي للغة المستهدفة.

---

## 3. المتطلبات الوظيفية (Functional Requirements)

### 3.1 FR-001: حساب مواقيت الصلاة

#### الوصف:
يجب أن يُحسب SDK أوقات الصلوات الستة التالية:  
`fajr`, `sunrise`, `dhuhr`, `asr`, `maghrib`, `isha`

#### المدخلات:
- `latitude`: عدد عشري (مثال: 24.7136)
- `longitude`: عدد عشري (مثال: 46.6753)
- `date`: كائن تاريخ (اختياري — يُستخدم اليوم الحالي إن لم يُمرر)
- `timezone`: عدد عشري (مثال: 3)
- `options`: كائن يحتوي على:
  - `method`: `'MWL' | 'ISNA' | 'Egypt' | 'Makkah' | 'Karachi' | 'Custom'`
  - `fajrAngle?`: عدد عشري (إجباري إذا كان `method = 'Custom'`)
  - `ishaAngle?`: عدد عشري (إجباري إذا كان `method = 'Custom'`)
  - `asrJurisdiction`: `'Standard' | 'Hanafi'`

#### المخرجات:
- كائن يحتوي على:
```json
{
  "fajr": "string (HH:mm)",
  "sunrise": "string (HH:mm)",
  "dhuhr": "string (HH:mm)",
  "asr": "string (HH:mm)",
  "maghrib": "string (HH:mm)",
  "isha": "string (HH:mm)"
}
```

#### القواعد:
- عند استخدام `method` مُعرف (مثل MWL)، تُستخدم الزوايا الافتراضية.
- عند استخدام `method: 'Custom'`، يجب توفير `fajrAngle` و `ishaAngle`.
- وقت المغرب: يُحسب عند الغروب + 1 دقيقة (أو بدون إضافة حسب الدقة المطلوبة).
- وقت الظهر: يُحسب عند تعامد الشمس + تصحيح بسيط (عادة 1-2 دقيقة حسب الموقع).
- وقت العصر: يُحسب حسب `asrJurisdiction`:
  - `Standard`: ظل = 1 × طول الجسم
  - `Hanafi`: ظل = 2 × طول الجسم

---

## 4. المتطلبات غير الوظيفية (Non-Functional Requirements)

### 4.1 الأداء (Performance)
- يجب أن يتم الحساب في أقل من **10 مللي ثانية** على جهاز متوسط.
- لا يستهلك ذاكرة أكثر من **100KB**.

### 4.2 الموثوقية (Reliability)
- يجب أن تكون النتائج دقيقة ±1 دقيقة مقارنة بالمصادر الموثوقة (مثل مواقيت الصلاة الرسمية للدول).
- يجب أن يعمل في جميع التواريخ (حتى السنوات البعيدة).

### 4.3 التوفر (Availability)
- يعمل 100% دون اتصال بالإنترنت.

### 4.4 الأمان (Security)
- لا يجمع أو يخزن أو ينقل أي بيانات.
- لا يحتاج صلاحيات خاصة.

### 4.5 الصيانة (Maintainability)
- كود نظيف ومعلّق.
- وثائق داخلية لكل دالة.
- هيكل بسيط وسهل التعديل.

### 4.6 التوافق (Compatibility)
- يجب أن يعمل على:
  - جميع أنظمة التشغيل (Windows, macOS, Linux, Android, iOS)
  - جميع المتصفحات (إذا كان للويب)
  - جميع الإصدارات الحديثة للغات البرمجة المستهدفة.

### 4.7 سهولة الاستخدام (Usability)
- واجهة برمجية بسيطة (Class واحدة أو Function واحدة).
- لا حاجة لتهيئة معقدة.
- أمثلة استخدام واضحة.

---

## 5. واجهة المستخدم (لا تنطبق — لأنها SDK)

> لا تحتوي على واجهة مستخدم — فقط واجهة برمجية.

---

## 6. واجهة خارجية (External Interfaces)

### 6.1 واجهة المستخدم (User Interface)
غير متوفرة — SDK داخلي.

### 6.2 واجهة الأجهزة (Hardware Interface)
لا يتطلب أجهزة خاصة — يعمل على أي جهاز يدعم اللغة المستهدفة.

### 6.3 واجهة الاتصالات (Communications Interface)
لا يوجد — لا اتصال بالشبكة.

### 6.4 واجهة البرمجيات (Software Interface)
- لا يعتمد على أي مكتبات خارجية.
- يستخدم فقط المكتبات القياسية للغة (مثل `Date`, `Math`).

---

## 7. القيود الأخرى (Other Non-Functional Requirements)

### 7.1 التوثيق (Documentation)
- ملف `README.md` يشرح:
  - كيفية التضمين
  - كيفية الاستخدام
  - أمثلة عملية
- تعليقات داخل الكود لكل دالة رئيسية.

### 7.2 التراخيص (Licensing)
- ترخيص MIT (مفتوح المصدر، حر الاستخدام، التعديل، التوزيع).

---

## 8. خصائص التصميم (Design Constraints)

- لا يُسمح باستخدام أي حزم خارجية.
- لا يُسمح بالاتصال بالإنترنت.
- لا يُسمح بتخزين البيانات على القرص أو الذاكرة المؤقتة.
- يجب أن يكون الكود مكتوبًا بلغة بسيطة وقابلة لل移植 (Portability).
- يجب أن يكون حجم الملف النهائي أقل من 50KB (غير مضغوط).

---

## 9. اختبار القبول (Acceptance Criteria)

يُقبل SDK إذا:

✅ يُرجع مواقيت صحيحة (ضمن هامش ±1 دقيقة) مقارنة بمواقيت رسمية لنفس الموقع والتاريخ.  
✅ لا يستخدم الإنترنت.  
✅ لا يعتمد على حزم خارجية.  
✅ يعمل على 3 منصات مختلفة على الأقل (مثال: Web, Android, iOS).  
✅ وقت التنفيذ أقل من 10ms.  
✅ لا يحتوي على أي ميزات إضافية غير المطلوبة (هجري، قبلة، إشعارات...).  
✅ يدعم التخصيص (زوايا، مذهب العصر).  
✅ وثائق الاستخدام واضحة ومباشرة.

---

## 10. الملاحق (Appendices)

### 10.1 زوايا الطرق المدعومة

| الطريقة | Fajr Angle | Isha Angle |
|---------|------------|------------|
| MWL | 18° | 17° |
| ISNA | 15° | 15° |
| Egypt | 19.5° | 17.5° |
| Makkah | 18.5° | 90 دقيقة بعد المغرب (أو 120 في رمضان) — *يُحسب وقتياً* |
| Karachi | 18° | 18° |

> ملاحظة: طريقة مكة — يمكن تبسيطها إلى زاوية ثابتة (مثل 18.5°) لتجنب التعقيد.

### 10.2 مثال كود استخدام (TypeScript)

```ts
const sdk = new PrayerTimesSDK(24.7136, 46.6753, new Date(), 3, {
  method: 'MWL',
  asrJurisdiction: 'Standard'
});

const times = sdk.getTimes();
console.log(times);
// { fajr: "04:32", sunrise: "05:52", dhuhr: "12:15", ... }
```

---

## ✅ خلاصة

هذا SDK مصمم ليكون:

- **أداة واحدة فقط**: حساب مواقيت الصلاة.
- **بدون زوائد**: لا هجري، لا قبلة، لا إشعارات.
- **بدون اتصال**: يعمل محليًا 100%.
- **بدون تبعيات**: لا npm، لا حزم، لا مكتبات خارجية.
- **خفيف وسريع**: أقل من 50KB، وأقل من 10ms تنفيذ.
- **مرن**: يدعم التخصيص البسيط (زوايا، مذهب).

---